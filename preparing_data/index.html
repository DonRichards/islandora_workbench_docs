<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Preparing your data - Islandora Workbench</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Preparing your data";
    var mkdocs_page_input_path = "preparing_data.md";
    var mkdocs_page_url = "/preparing_data/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Islandora Workbench</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Requirements and installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configuration/">Configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../check/">Checking configuration and input data</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Preparing your data</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#using-an-input-directory">Using an input directory</a></li>
    

    <li class="toctree-l2"><a href="#using-absolute-file-paths">Using absolute file paths</a></li>
    

    <li class="toctree-l2"><a href="#using-urls-as-file-paths">Using URLs as file paths</a></li>
    

    <li class="toctree-l2"><a href="#using-a-google-sheet-as-the-input-csv-file">Using a Google Sheet as the input CSV file</a></li>
    

    <li class="toctree-l2"><a href="#blank-or-missing-file-values">Blank or missing "file" values</a></li>
    

    <li class="toctree-l2"><a href="#creating-nodes-but-not-media">Creating nodes but not media</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../fields/">Fields</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../csv_file_templates/">CSV file templates</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../field_templates/">CSV field templates</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../aliases/">Assigning URL aliases</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../media_types/">Setting media types</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../alt_text/">Adding alt text to images</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../paged_and_compound/">Creating paged and compound content</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../nodes_only/">Creating nodes without media</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../creating_nodes_from_files/">Creating nodes from files</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../rolling_back/">Rolling back nodes and media</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../updating_nodes/">Updating nodes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deleting_nodes/">Deleting nodes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../adding_media/">Adding media to nodes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deleting_media/">Deleting media</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../output_csv/">The output CSV file</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../sample_data/">Creating nodes from the sample data</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../generating_sample_content/">Generating sample Islandora content</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../logging/">Logging</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../workflows/">Workflows</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../troubleshooting/">Troubleshooting</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Islandora Workbench</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Preparing your data</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mjordan/islandora_workbench_docs/edit/main/docs/preparing_data.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Islandora Workbench allows for arranging your input data in a variety of ways. The two basic sets of data you need to preare (depending on what task you are performing) are:</p>
<ol>
<li>a CSV file, containing data that will populate node fields (or do other things depending on what task you are performing)</li>
<li>files that will be used as Drupal media.</li>
</ol>
<h2 id="using-an-input-directory">Using an input directory</h2>
<p>In this configuration, you define an input directory (identified by the <code>input_dir</code> config option) that contains a CSV file with field content (identified by the <code>input_csv</code> config option) and any accompanying media files you want to add to the newly created nodes:</p>
<pre><code>your_folder/
├── image1.JPG
├── pic_saturday.jpg
├── image-27262.jpg
├── IMG_2958.JPG
├── someimage.jpg
└── metadata.csv
</code></pre>

<p>The names of the image/PDF/video/etc. files are included in the <code>file</code> column of the CSV file. Files of any extension are allowed. Islandora Workbench reads the CSV file and iterates throught it, performing the current task for each record. In this configuration, files other than the CSV and your media files are allowed in this directory (although for some configurations, your input directory should not contain any files that are not going to be ingested).</p>
<p>This is Islandora Workbench's default configuration. If you do not specify an <code>input_dir</code> or an <code>input_csv</code>, as illustrated in this minimal configuration file:</p>
<pre><code class="yaml">task: create
host: &quot;http://localhost:8000&quot;
username: admin
password: islandora
</code></pre>

<p>Workbench will assume your files are in a directory named "input_data" in the same directory as the Workbench script, and that within that directory, your CSV file is named "metadata.csv".</p>
<pre><code>workbench
workbench_utils.py
├── your_folder/
   ├── image1.JPG
   ├── pic_saturday.jpg
   ├── image-27262.jpg
   ├── IMG_2958.JPG
   ├── someimage.jpg
   └── metadata.csv
</code></pre>

<h2 id="using-absolute-file-paths">Using absolute file paths</h2>
<p>Both your input CSV file and the values in its <code>file</code> column can be absolute paths. In this configuration, your <code>input_csv</code> configuration setting must specify the absolute path to your input CSV file, and each value within its <code>file</code> column may point to a file to be used as the corresponding node's media file. You can also mix absolute and relative filenames in the same CSV file, but all relative filenames are considered to be in the directory named in <code>input_dir</code>. An example configuration file for this is:</p>
<pre><code class="yaml">task: create
host: &quot;http://localhost:8000&quot;
username: admin
password: islandora
input_csv: /tmp/input.csv
</code></pre>

<p>And within the <code>file</code> column of the CSV, values like:</p>
<pre><code class="text">id,file,title
001,/tmp/mydata/file01.png,A very good file
0002,/home/me/Documents/files/cat.jpg,My cat
003,dog.png,My dog
</code></pre>

<h2 id="using-urls-as-file-paths">Using URLs as file paths</h2>
<p>In the <code>file</code> column, you can also use URLs to files, like this:</p>
<pre><code class="text">id,file,title
001,http://www.mysite.com/file01.png,A very good file
0002,https://mycatssite.org/images/cat.jpg,My cat
003,dog.png,My dog
</code></pre>

<p><a href="../fields/#values-in-the-file-field">More information</a> is available on using URLs in your <code>file</code> column.</p>
<h2 id="using-a-google-sheet-as-the-input-csv-file">Using a Google Sheet as the input CSV file</h2>
<p>With this option, your configuration's <code>input_csv</code> option contains the URL to a publicly readable Google Sheet. To do this, simply provide the URL to the Google spreadsheet in your configuration file's <code>input_csv</code> option, like this:</p>
<pre><code class="yaml">task: create
host: &quot;http://localhost:8000&quot;
username: admin
password: islandora
input_csv: 'https://docs.google.com/spreadsheets/d/13Mw7gtBy1A3ZhYEAlBzmkswIdaZvX18xoRBxfbgxqWc/edit#gid=0'
</code></pre>

<p>That's all you need to do. Every time Workbench runs, it fetches the CSV content of the spreadsheet and saves it to a local file in the directory named in your <code>input_directory</code> configuration option, and from that point onward in its execution, uses the locally saved version of the spreadsheet. The default filename for this CSV file is <code>google_sheet.csv</code> but you can change it if you need to by including the <code>google_sheets_csv_filename</code> option in your configuration file, e.g., <code>google_sheets_csv_filename: my_filename.csv</code>.</p>
<p>Islandora Workbench fetches a new copy of the CSV data every time it runs (even with the <code>--check</code> option), so if you make changes to the contents of that local file, the changes will be overwritten with the data from the Google spreadsheet the next time you run Workbench. If you don't want to overwrite your local copy of the data, rename the local CSV file manually before running Workbench, and update the <code>input_csv</code> option in your configuration file accordingly.</p>
<p>An advantage of this constant refreshing of the CSV data is that you can delete all the rows from the Google spreadsheet, repopulate them with new data, and use the same configuration later (or, at least use the same <code>input_csv</code> URL).</p>
<p>Note that:</p>
<ul>
<li>You can use a Google spreadsheet in all tasks that use a CSV file as input.</li>
<li>All of the columns required in a local CSV file are also required in the Google spreadsheet.</li>
<li>The URL in the configuration file needs single or double quotes around it, like any other value that contains a colon.</li>
<li>You can use either the URL you copy from your browser when you are viewing the spreadsheet (which ends in "/edit#gid=0" or something similar), or the "sharing" URL you copy into your clipboard from within the "Share" dialog box (which ends in "edit?usp=sharing"). Either is OK.</li>
<li>The Google spreadsheet must be publicly readable, e.g. with "Anyone on the Internet with this link can view" permission.</li>
<li>Spreadsheets work best for descriptive metadata if all cells are formatted as "Plain text". To do this, in Sheets, select all cells, then choose the menu items Format &gt; Number &gt; Plain text <em>before adding any content to the cells</em>.</li>
<li>The worksheet that the CSV data is taken from is the first one in the spreadsheet (i.e., the one named in the left-most tab).</li>
<li>If the values in the <code>file</code> column of the spreadsheet are relative, they are assumed to point to files within your local <code>input_directory</code>, just like they do in a local CSV input file. However, you can also use abosolute file paths and URLs in the <code>file</code> column, as described above.</li>
</ul>
<h2 id="blank-or-missing-file-values">Blank or missing "file" values</h2>
<p>By defualt, if the <code>file</code> value for a row is empty, Workbench's <code>--check</code> option will show an error. But, in some cases you may want to create a node but not add any media. If you add <code>allow_missing_files: true</code> to your config file for "create" tasks, you can leave the <code>file</code> cell in your CSV for that item empty.</p>
<h2 id="creating-nodes-but-not-media">Creating nodes but not media</h2>
<p>If you want to only create nodes and not media, you can do so by including <code>nodes_only: true</code> in your configuration file. More detail <a href="../nodes_only/">is available</a>.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../fields/" class="btn btn-neutral float-right" title="Fields">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../check/" class="btn btn-neutral" title="Checking configuration and input data"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mjordan/islandora_workbench_docs" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../check/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../fields/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
