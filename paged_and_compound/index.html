<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Creating paged and compound content - Islandora Workbench</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Creating paged and compound content";
    var mkdocs_page_input_path = "paged_and_compound.md";
    var mkdocs_page_url = "/paged_and_compound/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Islandora Workbench</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Requirements and installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configuration/">Configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../check/">Checking configuration and input data</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../preparing_data/">Preparing your data</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../fields/">Fields</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../csv_file_templates/">CSV file templates</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../field_templates/">CSV field templates</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../aliases/">Assigning URL aliases</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../media_types/">Setting media types</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../alt_text/">Adding alt text to images</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Creating paged and compound content</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#using-subdirectories">Using subdirectories</a></li>
    

    <li class="toctree-l2"><a href="#with-pagechild-level-metadata">With page/child-level metadata</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../nodes_only/">Creating nodes without media</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../creating_nodes_from_files/">Creating nodes from files</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../rolling_back/">Rolling back nodes and media</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../updating_nodes/">Updating nodes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deleting_nodes/">Deleting nodes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../adding_media/">Adding media to nodes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../deleting_media/">Deleting media</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../output_csv/">The output CSV file</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../sample_data/">Creating nodes from the sample data</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../generating_sample_content/">Generating sample Islandora content</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../logging/">Logging</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../workflows/">Workflows</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../troubleshooting/">Troubleshooting</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Islandora Workbench</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Creating paged and compound content</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/mjordan/islandora_workbench_docs/edit/master/docs/paged_and_compound.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>Islandora Workbench provides two ways to create paged and compound content:</p>
<ul>
<li>using a specific subdirectory structure to define the relationship between the parent item and its children</li>
<li>using page-level metadata in the CSV to establish that relationship</li>
</ul>
<h3 id="using-subdirectories">Using subdirectories</h3>
<p>Enable this method by including <code>paged_content_from_directories: true</code> in your configuration file. Use this method when you are creating books, newspaper issues, or other paged content where your pages don't have their own metadata. This method groups page-level files into subdirectories that correspond to each parent, and does not require (or allow) page-level metadata in the CSV file. Each parent (book, newspaper issue, etc.) has a row on the CSV file, e.g.:</p>
<pre><code class="text">id,title,field_model,field_display_hints
book1,How to Use Islandora Workbench like a Pro,28,2
book2,Using Islandora Workbench for Fun and Profit,28,2
</code></pre>

<p>Each parent's pages are located in a subdirectory of the input directory that is named to match the value of the <code>id</code> field of the parent item they are pages of:</p>
<pre><code>samplebook/
├── book1
│   ├── page-001.jpg
│   ├── page-002.jpg
│   └── page-003.jpg
├── book2
│   ├── isbn-1843341778-001.jpg
│   ├── using-islandora-workbench-page-002.jpg
│   └── page-003.jpg
└── metadata.csv
</code></pre>

<p>The page filenames have significance. The sequence of the page is determined by the last segment of each filename before the extension, and is separated from the rest of the filename by a dash (<code>-</code>), although you can use another character by setting the <code>paged_content_sequence_seprator</code> option in your configuration file. For example, using the filenames for "book1" above, the sequence of "page-001.jpg" is "001". Dashes (or whatever your separator character is) can exist elsewhere in filenames, since Workbench will always use the string after the <em>last</em> dash as the sequence number; for example, the sequence of "isbn-1843341778-001.jpg" for "book2" is also "001". Workbench takes this sequence number, strips of any leader zeros, and uses it to populate the <code>field_weight</code> in the page nodes, so "001" becomes a weight value of 1, "002" becomes a weight value of 2, and so on.</p>
<p>Titles for pages are generated automatically using the pattern <code>parent_title</code> + <code>, page</code> + <code>sequence_number</code>, where "parent title" is inherited from the page's parent node and "sequence number" is the page's sequence. For example, if a page's parent has the title "How to Write a Book" and its sequence number is 450, its automatically generated title will be "How to Write a Book, page 450".</p>
<p>Finally, even though only minimal metadata is assigned to pages using this method (i.e., the automatically generated title and Islandora model), you can add additional metadata to pages using a separate <code>update</code> task.</p>
<p>Important things to note when using this method:</p>
<ul>
<li>To use this method of creating paged content, you must include the following in your configuration file:</li>
<li><code>paged_content_sequence_seprator: true</code></li>
<li><code>paged_content_page_model_tid</code> set to your Islandora's term ID for pages</li>
<li>The Islandora model of the parent is not set automatically. You need to include a <code>field_model</code> value for each item in your CSV file.</li>
<li>You should also include a <code>field_display_hints</code> column in your CSV. This value is applied to the parent nodes and also the page nodes, unless the <code>paged_content_page_display_hints</code> setting is present in you configuration file. However, if you normally don't set the "Display hints" field in your objects but use a Context to determine how objects display, you should not include a <code>field_display_hints</code> column in your CSV file.</li>
<li>Unlike every other Islandora Workbench configuration, the metadata CSV should not contain a <code>file</code> column.</li>
<li><code>id</code> can be defined as another field name using the <code>id_field</code> configuration option. If you do define a different ID field using the <code>id_field</code> option, creating the parent/paged item relationships will still work.</li>
<li>The Drupal content type for page nodes is inherited from the parent, unless you specify a different content type in the <code>paged_content_page_content_type</code> setting in your configuration file.</li>
</ul>
<h3 id="with-pagechild-level-metadata">With page/child-level metadata</h3>
<p>Using this method, the metadata CSV file contains a row for each parent and all child items. You should use this method when you are creating books, newspaper issues, or other paged or compound content where each page has its own metadata, or when you are creating compound objects of any Islandora model. The files for each page are named explicitly in the <code>file</code> column rather than being in a subdirectory. To link the pages to the parent, Workbench establishes parent/child relationships between items with <code>parent_id</code> values (the pages/children) with that are the same as the <code>id</code> value of another item (the parent). For this to work, your CSV file must contain a <code>parent_id</code> field plus the standard Islandora fields <code>field_weight</code>, <code>field_member_of</code>, and <code>field_model</code> (the role of these last three fields will be explained below). The <code>id</code> field is required in all CSV files used to create content, so in this case, your CSV needs both an <code>id</code> field and a <code>parent_id</code> field.</p>
<p>The following example illustrates how this works. Here is the raw CSV data:</p>
<pre><code class="text">id,parent_id,field_weight,file,title,field_description,field_model,field_member_of
001,,,,Postcard 1,The first postcard,28,197
003,001,1,image456.jpg,Front of postcard 1,The first postcard's front,29,
004,001,2,image389.jpg,Back of postcard 1,The first postcard's back,29,
002,,,,Postcard 2,The second postcard,28,197
006,002,1,image2828.jpg,Front of postcard 2,The second postcard's front,29,
007,002,2,image777.jpg,Back of postcard 2,The second postcard's back,29,
</code></pre>

<p>The empty cells make this CSV difficult to read. Here is the same data in a spreadsheet:</p>
<p><img alt="Paged content CSV" src="../images/paged_csv.png" /></p>
<p>The data contains rows for two postcards (rows with <code>id</code> values "001" and "002") plus a back and front for each (the remaining four rows). The <code>parent_id</code> value for items with <code>id</code> values "003" and "004" is the same as the <code>id</code> value for item "001", which will tell Workbench to make both of those items children of item "001"; the <code>parent_id</code> value for items with <code>id</code> values "006" and "007" is the same as the <code>id</code> value for item "002", which will tell Workbench to make both of those items children of the item "002". We can't populate  <code>field_member_of</code> for the child pages in our CSV because we won't have node IDs for the parents until they are created as part of the same batch as the children.</p>
<p>In this example, the rows for our postcard objects have empty <code>parent_id</code>, <code>field_weight</code>, and <code>file</code> columns because our postcards are not children of other nodes and don't have their own media. (However, the records for our postcard objects do have a value in <code>field_member_of</code>, which is the node ID of the "Postcards" collection that already/hypothetically exists.) Rows for the postcard front and back image objects have a value in their <code>field_weight</code> field, and they have values in their <code>file</code> column because we are creating objects that contain image media. Importantly, they have no value in their <code>field_member_of</code> field because the node ID of the parent isn't known when you create your CSV; instead, Islandora Workbench assigns each child's <code>field_member_of</code> dynamically, just after its parent node is created.</p>
<p>Some important things to note:</p>
<ul>
<li><code>id</code> can be defined as another field name using the <code>id_field</code> configuration option. If you do define a different ID field using the <code>id_field</code> option, creating the parent/child relationships will still work.</li>
<li>The values of the <code>id</code> and <code>parent_id</code> columns do not have to follow any sequential pattern. Islandora Workbench treats them as simple strings and matches them on that basis, without looking for sequential relationships of any kind between the two fields.</li>
<li>The CSV records for children items don't need to come <em>immediately</em> after the record for their parent, but they do need to come after that record. This is because Workbench creates nodes in the order their records are in the CSV file (top to bottom). As long as the parent node has already been created when a child node is created, the parent/child relationship via the child's <code>field_member_of</code> will be correct.</li>
<li>Currently, you must include values in the children's <code>field_weight</code> column. It may be possible to automatically generate values for this field (see <a href="https://github.com/mjordan/islandora_workbench/issues/84">this issue</a>).</li>
<li>Currently, Islandora model values (e.g. "Paged Content", "Page") are not automatically assigned. You must include the correct "Islandora Models" taxonomy term IDs in your <code>field_model</code> column for all parent and child records, as you would for any other Islandora objects you are creating. Like for <code>field_weight</code>, it may be possible to automatically generate values for this field (see <a href="https://github.com/mjordan/islandora_workbench/issues/85">this issue</a>).</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../nodes_only/" class="btn btn-neutral float-right" title="Creating nodes without media">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../alt_text/" class="btn btn-neutral" title="Adding alt text to images"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mjordan/islandora_workbench_docs" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../alt_text/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../nodes_only/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
